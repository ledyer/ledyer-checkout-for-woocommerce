# Job that makes releases on the main branch.
# Excluded files and folders that should not be part of the plugin is defined in .distignore

# name: Release to WordPress plugin repository
# on:
#   push:
#     branches:
#       - main
# jobs:
#   release:
#     runs-on: ubuntu-latest

#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v3

#       - name: Use Node.js
#         uses: actions/setup-node@v3
#         with:
#           node-version: 18

#       - name: Install Dependencies
#         run: npm ci

#       - name: Semantic Release - create release
#         id: semantic
#         run: npx semantic-release
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

#       - name: Deploy Plugin to WordPress SVN
#         uses: 10up/action-wordpress-plugin-deploy@stable
#         env:
#           svn_username: ${{ secrets.SVN_USERNAME }}
#           svn_password: ${{ secrets.SVN_PASSWORD }}

#       - name: Build Plugin Zip
#         id: build_zip
#         uses: 10up/action-wordpress-plugin-build-zip@stable

#       - name: Get the version
#         id: get_version
#         run: echo ::set-output name=VERSION::$(echo ${{ steps.semantic.outputs.new_release.published_at }} | jq -r .tag_name)

#       - name: Update GitHub Release
#         uses: softprops/action-gh-release@v1
#         with:
#           tag_name: ${{ steps.get_version.outputs.VERSION }}
#           files: ${{ steps.build_zip.outputs.zip_path }}
#         env:
#           GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
